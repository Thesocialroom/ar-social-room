<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR Fashion Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&amp;family=Syne:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Space Grotesk', sans-serif;
    }

    .font-syne {
      font-family: 'Syne', sans-serif;
    }

    html, body, #app {
      height: 100%;
      width: 100%;
    }

    /* Gradient backgrounds */
    .grad-neon {
      background: linear-gradient(135deg, #0f0f23 0%, #1a0033 50%, #2d0052 100%);
    }

    .grad-electric {
      background: linear-gradient(135deg, #00d4ff 0%, #0099ff 50%, #6600ff 100%);
    }

    .grad-fire {
      background: linear-gradient(135deg, #ff0080 0%, #ff6b35 50%, #ffaa00 100%);
    }

    .grad-ocean {
      background: linear-gradient(135deg, #006aff 0%, #00d4ff 50%, #00ffaa 100%);
    }

    .grad-mystic {
      background: linear-gradient(135deg, #a855f7 0%, #ec4899 50%, #f43f5e 100%);
    }

    /* Animations */
    @keyframes float-up {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(3deg); }
    }

    @keyframes glow-pulse {
      0%, 100% { 
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
                    0 0 40px rgba(0, 212, 255, 0.3);
      }
      50% { 
        box-shadow: 0 0 40px rgba(0, 212, 255, 0.8),
                    0 0 80px rgba(0, 212, 255, 0.5);
      }
    }

    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }

    @keyframes slide-in {
      from { 
        opacity: 0;
        transform: translateY(30px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes bounce-gentle {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    @keyframes ring-pulse {
      0%, 100% { 
        box-shadow: 0 0 0 0 rgba(0, 212, 255, 0.7);
      }
      50% { 
        box-shadow: 0 0 0 10px rgba(0, 212, 255, 0);
      }
    }

    .float-animation {
      animation: float-up 4s ease-in-out infinite;
    }

    .glow-pulse {
      animation: glow-pulse 2.5s ease-in-out infinite;
    }

    .shimmer-text {
      background: linear-gradient(90deg, #00d4ff, #0099ff, #ff00ff, #00d4ff);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 3s linear infinite;
    }

    .slide-in-animation {
      animation: slide-in 0.6s ease-out forwards;
    }

    .bounce-animation {
      animation: bounce-gentle 2s ease-in-out infinite;
    }

    .ring-pulse-animation {
      animation: ring-pulse 2s ease-in-out infinite;
    }

    /* Neon effects */
    .neon-border {
      border: 2px solid;
      border-image: linear-gradient(135deg, #00d4ff, #ff00ff) 1;
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.3), inset 0 0 20px rgba(0, 212, 255, 0.1);
    }

    .neon-glow {
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.6), 0 0 60px rgba(0, 212, 255, 0.3);
    }

    /* Glass morphism */
    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .glass-bright {
      background: rgba(0, 212, 255, 0.1);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(0, 212, 255, 0.3);
    }

    /* Buttons */
    .btn-primary {
      position: relative;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      transition: left 0.3s ease;
      z-index: 1;
    }

    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-primary span {
      position: relative;
      z-index: 2;
    }

    /* Video cards */
    .video-card {
      position: relative;
      overflow: hidden;
      border-radius: 20px;
      aspect-ratio: 3 / 4;
      backdrop-filter: blur(10px);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .video-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 60px rgba(0, 212, 255, 0.4);
    }

    .video-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent 0%, rgba(0, 212, 255, 0.1) 100%);
      pointer-events: none;
    }

    /* Item cards grid */
    .item-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
      gap: 12px;
    }

    .item-card {
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 16px;
      overflow: hidden;
    }

    .item-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(255, 0, 255, 0.2));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .item-card:hover {
      transform: scale(1.08) translateY(-4px);
    }

    .item-card:hover::before {
      opacity: 1;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 212, 255, 0.05);
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #00d4ff, #ff00ff);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #0099ff, #ff0088);
    }

    /* Text styles */
    .text-glow {
      color: #00d4ff;
      text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    }

    /* Badge */
    .badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(255, 0, 255, 0.2));
      border: 1px solid rgba(0, 212, 255, 0.5);
      color: #00d4ff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Loading spinner */
    .spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(0, 212, 255, 0.2);
      border-top: 3px solid #00d4ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .item-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full grad-neon overflow-auto flex flex-col"><!-- LOGIN SCREEN -->
   <div id="login-view" class="h-full w-full flex items-center justify-center p-4 relative overflow-hidden"><!-- Animated background elements -->
    <div class="absolute top-20 -left-32 w-96 h-96 grad-electric rounded-full blur-3xl opacity-20 animate-pulse"></div>
    <div class="absolute bottom-20 -right-32 w-96 h-96 grad-fire rounded-full blur-3xl opacity-20 animate-pulse" style="animation-delay: 1s;"></div>
    <div class="relative z-10 max-w-md w-full"><!-- Logo/Hero -->
     <div class="text-center mb-12">
      <div class="inline-block mb-6">
       <div class="w-24 h-24 grad-electric rounded-3xl flex items-center justify-center float-animation neon-glow">
        <div class="text-5xl">
         ‚ú®
        </div>
       </div>
      </div>
      <h1 class="font-syne text-5xl font-bold text-white mb-2 shimmer-text">AR Fashion</h1>
      <p class="text-lg text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-300 font-semibold">Style With Friends</p>
      <p class="text-sm text-white/60 mt-2">Create. Express. Share.</p>
     </div><!-- Login Form -->
     <div class="glass neon-border rounded-3xl p-8 mb-6">
      <form id="login-form" class="space-y-5">
       <div><label class="block text-sm font-semibold text-cyan-300 mb-3 uppercase tracking-wider">Your Name</label> <input type="text" id="username-input" placeholder="Enter your name" class="w-full px-4 py-3 rounded-xl glass text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all">
       </div>
       <div><label class="block text-sm font-semibold text-cyan-300 mb-3 uppercase tracking-wider">Room Code</label> <input type="text" id="room-code-input" placeholder="Join a friend's room (optional)" class="w-full px-4 py-3 rounded-xl glass text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all">
       </div>
       <div class="flex items-start gap-2 p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30"><span class="text-cyan-400 text-lg flex-shrink-0">üí°</span>
        <p class="text-xs text-cyan-200">Enter a room code to join friends, or leave blank to create your own studio.</p>
       </div><button type="submit" class="w-full grad-electric text-white font-bold py-3 rounded-xl btn-primary hover:shadow-lg hover:shadow-cyan-500/50 transition-all relative overflow-hidden"> <span class="flex items-center justify-center gap-2">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
         </svg> Enter Studio </span> </button>
      </form>
     </div>
     <div id="login-error" class="hidden p-4 rounded-xl bg-red-500/20 border border-red-500/50 text-red-300 text-sm text-center"><!-- Error messages here -->
     </div><!-- Footer -->
     <div class="text-center">
      <p class="text-xs text-white/40">No experience needed ‚Ä¢ Free ‚Ä¢ Instant access</p>
     </div>
    </div>
   </div><!-- STUDIO SCREEN -->
   <div id="studio-view" class="hidden h-full w-full flex flex-col relative overflow-hidden"><!-- Immersive Background -->
    <div id="studio-background" class="absolute inset-0 z-0 transition-all duration-1000"><!-- Background will be dynamically set -->
    </div><!-- Content Overlay -->
    <div class="relative z-10 h-full w-full flex flex-col"><!-- Header -->
     <header class="px-6 py-4 flex items-center justify-between backdrop-blur-md bg-black/20 border-b border-white/10">
      <div class="flex items-center gap-4"><button id="logout-btn" class="p-3 rounded-full glass hover:glass-bright transition-all" title="Leave Studio">
        <svg class="w-5 h-5 text-cyan-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
        </svg></button>
       <div>
        <h1 id="studio-room-name" class="font-syne text-xl font-bold text-white drop-shadow-lg">Studio</h1>
        <p id="studio-user" class="text-xs text-cyan-300">You</p>
       </div>
      </div>
      <div class="flex items-center gap-3">
       <div id="studio-avatars" class="flex -space-x-2"><!-- Avatars here -->
       </div><button id="share-invite-btn" class="px-4 py-2 rounded-full glass-bright text-cyan-300 text-sm font-semibold hover:bg-cyan-500/20 transition-all flex items-center gap-2 badge">
        <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 20 20"><path d="M15 8a3 3 0 11-6 0 3 3 0 016 0zM16.918 13.472c.018.31.018.62 0 .93-.859 1.165-2.623 1.97-4.918 1.97-2.296 0-4.059-.805-4.918-1.97-.018-.31-.018-.62 0-.93.86-1.165 2.623-1.97 4.918-1.97 2.296 0 4.059.805 4.918 1.97zM19.534 15.894c-.483-.779-1.12-1.51-1.88-2.122A8.966 8.966 0 0020 8c0-1.771-.332-3.459-.934-5" />
        </svg> Invite </button>
      </div>
     </header><!-- Main Studio Area -->
     <main class="flex-1 overflow-auto px-6 py-6 pb-40"><!-- AR Runway/Stage -->
      <div class="mb-8">
       <p class="text-xs font-semibold text-cyan-300 mb-4 uppercase tracking-widest drop-shadow-lg">‚ú® Live Runway</p>
       <div id="video-grid" class="grid grid-cols-2 gap-6"><!-- Video frames here -->
       </div>
      </div><!-- Background Themes -->
      <div class="mb-10 glass rounded-2xl p-6">
       <p class="text-sm font-semibold text-white mb-4 uppercase tracking-widest">üåç Background Theme</p>
       <div class="grid grid-cols-2 gap-3"><button data-theme="runway" class="theme-btn-bg group relative overflow-hidden rounded-2xl h-32 transition-all hover:scale-105 border-3 border-transparent hover:border-cyan-400" title="Luxury Runway">
         <div class="absolute inset-0 bg-gradient-to-br from-purple-900 via-gray-900 to-black flex items-center justify-center">
          <div class="text-center"><span class="text-4xl">üé≠</span>
           <p class="text-white text-xs font-bold mt-2">Luxury Runway</p>
          </div>
         </div></button> <button data-theme="beach" class="theme-btn-bg group relative overflow-hidden rounded-2xl h-32 transition-all hover:scale-105 border-3 border-transparent hover:border-cyan-400" title="Beach Paradise">
         <div class="absolute inset-0 bg-gradient-to-br from-sky-400 via-blue-400 to-cyan-300 flex items-center justify-center">
          <div class="text-center"><span class="text-4xl">üèùÔ∏è</span>
           <p class="text-white text-xs font-bold mt-2">Beach Paradise</p>
          </div>
         </div></button> <button data-theme="city" class="theme-btn-bg group relative overflow-hidden rounded-2xl h-32 transition-all hover:scale-105 border-3 border-transparent hover:border-cyan-400" title="City Lights">
         <div class="absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-amber-900 flex items-center justify-center">
          <div class="text-center"><span class="text-4xl">üåÉ</span>
           <p class="text-white text-xs font-bold mt-2">City Lights</p>
          </div>
         </div></button> <button data-theme="nature" class="theme-btn-bg group relative overflow-hidden rounded-2xl h-32 transition-all hover:scale-105 border-3 border-transparent hover:border-cyan-400" title="Nature Forest">
         <div class="absolute inset-0 bg-gradient-to-br from-green-700 via-emerald-700 to-green-900 flex items-center justify-center">
          <div class="text-center"><span class="text-4xl">üå≤</span>
           <p class="text-white text-xs font-bold mt-2">Nature Forest</p>
          </div>
         </div></button> <button data-theme="space" class="theme-btn-bg group relative overflow-hidden rounded-2xl h-32 transition-all hover:scale-105 border-3 border-transparent hover:border-cyan-400" title="Space Galaxy">
         <div class="absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-black flex items-center justify-center">
          <div class="text-center"><span class="text-4xl">üåå</span>
           <p class="text-white text-xs font-bold mt-2">Space Galaxy</p>
          </div>
         </div></button> <button data-theme="neon" class="theme-btn-bg group relative overflow-hidden rounded-2xl h-32 transition-all hover:scale-105 border-3 border-transparent hover:border-cyan-400" title="Neon Night">
         <div class="absolute inset-0 bg-gradient-to-br from-pink-600 via-purple-600 to-cyan-600 flex items-center justify-center">
          <div class="text-center"><span class="text-4xl">üí´</span>
           <p class="text-white text-xs font-bold mt-2">Neon Night</p>
          </div>
         </div></button>
       </div>
      </div><!-- Fashion Items -->
      <div class="glass rounded-2xl p-6">
       <p class="text-sm font-semibold text-white mb-4 uppercase tracking-widest">üëó Fashion Items</p>
       <div class="item-grid"><button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="glasses" title="Add Glasses">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500/30 to-purple-500/30 flex items-center justify-center group-hover:from-pink-500/50 group-hover:to-purple-500/50 transition-all"><span class="text-lg">üëì</span>
         </div><span class="text-xs text-white font-semibold">Glasses</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="hat" title="Add Hat">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500/30 to-orange-500/30 flex items-center justify-center group-hover:from-yellow-500/50 group-hover:to-orange-500/50 transition-all"><span class="text-lg">üé©</span>
         </div><span class="text-xs text-white font-semibold">Hat</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="necklace" title="Add Necklace">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500/30 to-blue-500/30 flex items-center justify-center group-hover:from-cyan-500/50 group-hover:to-blue-500/50 transition-all"><span class="text-lg">‚ú®</span>
         </div><span class="text-xs text-white font-semibold">Necklace</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="earrings" title="Add Earrings">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500/30 to-pink-500/30 flex items-center justify-center group-hover:from-rose-500/50 group-hover:to-pink-500/50 transition-all"><span class="text-lg">üíç</span>
         </div><span class="text-xs text-white font-semibold">Earrings</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="dress" title="Add Dress">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-violet-500/30 to-purple-500/30 flex items-center justify-center group-hover:from-violet-500/50 group-hover:to-purple-500/50 transition-all"><span class="text-lg">üëó</span>
         </div><span class="text-xs text-white font-semibold">Dress</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="shoes" title="Add Shoes">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-red-500/30 to-rose-500/30 flex items-center justify-center group-hover:from-red-500/50 group-hover:to-rose-500/50 transition-all"><span class="text-lg">üë†</span>
         </div><span class="text-xs text-white font-semibold">Shoes</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="watch" title="Add Watch">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/30 to-yellow-500/30 flex items-center justify-center group-hover:from-amber-500/50 group-hover:to-yellow-500/50 transition-all"><span class="text-lg">‚åö</span>
         </div><span class="text-xs text-white font-semibold">Watch</span> </button> <button class="item-card glass-bright rounded-2xl p-4 flex flex-col items-center gap-2 group" data-item="bag" title="Add Bag">
         <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/30 to-teal-500/30 flex items-center justify-center group-hover:from-emerald-500/50 group-hover:to-teal-500/50 transition-all"><span class="text-lg">üëú</span>
         </div><span class="text-xs text-white font-semibold">Bag</span> </button>
       </div>
      </div>
     </main>
    </div><!-- Action Bar -->
    <div class="fixed bottom-0 left-0 right-0 p-6 glass neon-border border-b-0 border-l-0 border-r-0 flex items-center justify-center gap-6 backdrop-blur-xl z-30"><button id="photo-btn" class="group relative w-16 h-16 rounded-full grad-fire flex items-center justify-center hover:shadow-2xl hover:shadow-red-500/50 transition-all shadow-lg hover:-translate-y-1">
      <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg></button> <button id="video-btn" class="group relative w-20 h-20 rounded-full grad-electric flex items-center justify-center hover:shadow-2xl hover:shadow-cyan-500/50 transition-all shadow-xl hover:-translate-y-2 border-4 border-white/20">
      <div class="w-8 h-8 rounded-full bg-white glow-pulse"></div></button> <button id="share-btn" class="group relative w-16 h-16 rounded-full grad-mystic flex items-center justify-center hover:shadow-2xl hover:shadow-purple-500/50 transition-all shadow-lg hover:-translate-y-1">
      <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
      </svg></button>
    </div><!-- Recording Indicator -->
    <div id="recording-indicator" class="hidden fixed bottom-32 left-1/2 -translate-x-1/2 z-40 flex items-center gap-3 px-6 py-3 rounded-full glass-bright neon-border">
     <div class="w-3 h-3 rounded-full bg-red-500 animate-pulse"></div><span class="text-red-400 text-sm font-semibold uppercase tracking-wider">Recording</span> <span id="record-time" class="text-white/70 text-sm font-mono">00:00</span>
    </div>
   </div><!-- User Selector Modal -->
   <div id="user-selector" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="glass-bright neon-border rounded-3xl p-8 max-w-sm w-full slide-in-animation">
     <h3 class="font-syne text-2xl font-bold text-white mb-6 text-center">Who's wearing this?</h3>
     <div id="user-selector-buttons" class="space-y-3 mb-6"><!-- Buttons here -->
     </div><button id="close-selector" class="w-full py-3 rounded-xl glass hover:glass-bright transition-all text-white/70 text-sm font-semibold uppercase tracking-wider"> Cancel </button>
    </div>
   </div><!-- Share Modal -->
   <div id="share-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4">
    <div class="glass-bright neon-border rounded-3xl p-8 max-w-md w-full slide-in-animation">
     <div class="text-center mb-8">
      <div class="inline-block w-16 h-16 rounded-2xl grad-fire flex items-center justify-center mb-4 neon-glow"><span class="text-3xl">‚ú®</span>
      </div>
      <h3 class="font-syne text-2xl font-bold text-white mb-2">Share Your Look</h3>
      <p class="text-sm text-white/60">Stun the world with your style</p>
     </div>
     <div class="grid grid-cols-3 gap-3 mb-6"><button class="share-platform group flex flex-col items-center gap-2 p-4 rounded-2xl glass hover:glass-bright transition-all" data-platform="whatsapp">
       <div class="w-12 h-12 rounded-full bg-green-500 flex items-center justify-center group-hover:scale-110 transition-transform">
        <svg class="w-6 h-6 text-white" viewbox="0 0 24 24" fill="currentColor">
         <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
        </svg>
       </div><span class="text-xs text-white font-semibold">WhatsApp</span> </button> <button class="share-platform group flex flex-col items-center gap-2 p-4 rounded-2xl glass hover:glass-bright transition-all" data-platform="instagram">
       <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400 flex items-center justify-center group-hover:scale-110 transition-transform">
        <svg class="w-6 h-6 text-white" viewbox="0 0 24 24" fill="currentColor">
         <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
        </svg>
       </div><span class="text-xs text-white font-semibold">Instagram</span> </button> <button class="share-platform group flex flex-col items-center gap-2 p-4 rounded-2xl glass hover:glass-bright transition-all" data-platform="facebook">
       <div class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform">
        <svg class="w-6 h-6 text-white" viewbox="0 0 24 24" fill="currentColor">
         <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
        </svg>
       </div><span class="text-xs text-white font-semibold">Facebook</span> </button>
     </div><button id="close-share" class="w-full py-3 rounded-xl glass hover:glass-bright transition-all text-white font-semibold uppercase tracking-wider"> Close </button>
    </div>
   </div><!-- Invite Modal -->
   <div id="invite-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4">
    <div class="glass-bright neon-border rounded-3xl p-8 max-w-md w-full slide-in-animation">
     <div class="text-center mb-8">
      <div class="inline-block w-16 h-16 rounded-2xl grad-electric flex items-center justify-center mb-4 neon-glow"><span class="text-3xl">üë•</span>
      </div>
      <h3 class="font-syne text-2xl font-bold text-white mb-2">Invite Friends</h3>
      <p class="text-sm text-white/60">Share the code to style together</p>
     </div>
     <div class="bg-black/40 rounded-2xl p-6 mb-6 border border-cyan-500/30 text-center">
      <p class="text-xs text-cyan-400 mb-3 uppercase tracking-widest font-semibold">YOUR ROOM CODE</p>
      <p id="invite-code" class="text-3xl font-syne font-bold text-cyan-300 tracking-wider shimmer-text">LOADING</p>
     </div><button id="copy-code" class="w-full grad-electric text-white font-bold py-3 rounded-xl mb-4 hover:shadow-lg hover:shadow-cyan-500/50 transition-all btn-primary"> üìã Copy Code </button>
     <div class="bg-cyan-500/10 rounded-xl p-4 mb-6 border border-cyan-500/30">
      <p class="text-xs text-cyan-200">‚è∞ This room auto-deletes when you leave</p>
     </div><button id="close-invite" class="w-full py-3 rounded-xl glass hover:glass-bright transition-all text-white/70 text-sm font-semibold uppercase tracking-wider"> Close </button>
    </div>
   </div><!-- Photo Toast -->
   <div id="photo-toast" class="hidden fixed top-20 left-1/2 -translate-x-1/2 z-50 px-8 py-4 rounded-full grad-fire text-white font-bold shadow-2xl shadow-red-500/50 flex items-center gap-2 slide-in-animation"><span class="text-lg">üì∏</span> <span>Perfect shot!</span>
   </div>
  </div>
  <script>
    let currentUser = null;
    let currentRoom = null;
    let selectedItem = null;
    let isRecording = false;
    let recordingTime = 0;
    let recordingInterval = null;

    const userItems = {};
    const colors = ['from-blue-400 to-cyan-300', 'from-green-400 to-emerald-300', 'from-orange-400 to-red-300', 'from-purple-400 to-pink-300'];
    const names = ['You', 'Friend 1', 'Friend 2', 'Friend 3'];
    const sessionRooms = new Map();

    // LOGIN
    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('username-input').value.trim();
      const roomCode = document.getElementById('room-code-input').value.trim().toUpperCase();
      const errorEl = document.getElementById('login-error');

      if (!username) {
        errorEl.textContent = '‚úñ Please enter your name';
        errorEl.classList.remove('hidden');
        return;
      }

      errorEl.classList.add('hidden');
      currentUser = { id: 'user_' + Math.random().toString(36).substr(2, 8), name: username };

      if (roomCode) {
        if (sessionRooms.has(roomCode)) {
          enterRoom(sessionRooms.get(roomCode));
        } else {
          errorEl.textContent = '‚úñ Room not found or expired';
          errorEl.classList.remove('hidden');
          currentUser = null;
        }
      } else {
        createNewRoom();
      }
    });

    function createNewRoom() {
      const roomCode = 'ROOM' + Math.random().toString(36).substr(2, 8).toUpperCase();
      const room = {
        room_id: roomCode,
        room_name: currentUser.name + "'s Studio",
        background_theme: 'runway',
        participants: [currentUser.id],
        max_participants: 4
      };
      sessionRooms.set(roomCode, room);
      enterRoom(room);
    }

    function getBackgroundStyle(theme) {
      const backgrounds = {
        runway: 'linear-gradient(135deg, #1a0f2e 0%, #2d1b3d 50%, #1a0a2e 100%)',
        beach: 'linear-gradient(135deg, #87ceeb 0%, #e0f6ff 50%, #90ee90 100%)',
        city: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)',
        nature: 'linear-gradient(135deg, #1b4332 0%, #2d6a4f 50%, #1b4332 100%)',
        space: 'linear-gradient(135deg, #0a0e27 0%, #1a0a3d 50%, #0f0320 100%)',
        neon: 'linear-gradient(135deg, #ff006e 0%, #8338ec 50%, #3a86ff 100%)'
      };
      return backgrounds[theme] || backgrounds.runway;
    }

    function setBackgroundTheme(theme) {
      const bg = document.getElementById('studio-background');
      if (bg) {
        bg.style.background = getBackgroundStyle(theme);
      }
    }

    function enterRoom(room) {
      currentRoom = room;
      if (!room.participants.includes(currentUser.id)) {
        room.participants.push(currentUser.id);
      }

      room.participants.forEach(pid => {
        if (!userItems[pid]) userItems[pid] = [];
      });

      document.getElementById('login-view').classList.add('hidden');
      document.getElementById('studio-view').classList.remove('hidden');
      document.getElementById('studio-room-name').textContent = room.room_name;
      document.getElementById('studio-user').textContent = currentUser.name;
      document.getElementById('invite-code').textContent = room.room_id;

      const videoGrid = document.getElementById('video-grid');
      videoGrid.innerHTML = '';
      for (let i = 0; i < parseInt(room.max_participants); i++) {
        const frame = document.createElement('div');
        frame.className = 'video-card glass-bright';
        frame.id = `video-${i}`;
        frame.innerHTML = `
          <div class="absolute inset-0 flex flex-col items-center justify-center p-4">
            <div class="w-20 h-20 rounded-2xl bg-gradient-to-br ${colors[i % colors.length]} flex items-center justify-center mb-3">
              <span class="text-4xl">üë§</span>
            </div>
            <span class="text-white font-semibold text-sm">${names[i]}</span>
            <div id="items-${i}" class="flex gap-1 mt-2 flex-wrap justify-center"></div>
          </div>
        `;
        videoGrid.appendChild(frame);
      }

      const app = document.getElementById('app');
      const themes = {
        electric: 'grad-electric',
        fire: 'grad-fire',
        ocean: 'grad-ocean',
        mystic: 'grad-mystic'
      };
      app.classList.forEach(cls => {
        if (cls.startsWith('grad-')) app.classList.remove(cls);
      });
      app.classList.add(themes[room.theme] || 'grad-electric');

      const avatarsContainer = document.getElementById('studio-avatars');
      avatarsContainer.innerHTML = '';
      for (let i = 0; i < Math.min(3, room.max_participants); i++) {
        const avatar = document.createElement('div');
        avatar.className = `w-8 h-8 rounded-full bg-gradient-to-br ${colors[i]} flex items-center justify-center text-xs font-bold text-white border-2 border-white/30`;
        avatar.textContent = names[i].charAt(0);
        avatarsContainer.appendChild(avatar);
      }

      // Set initial background theme
      setBackgroundTheme(room.background_theme || 'runway');
    }

    // Theme switching
    document.querySelectorAll('.theme-btn-bg').forEach(btn => {
      btn.addEventListener('click', () => {
        const theme = btn.dataset.theme;
        
        // Update background
        setBackgroundTheme(theme);

        // Update button states
        document.querySelectorAll('.theme-btn-bg').forEach(b => {
          b.classList.remove('border-cyan-400');
          b.classList.add('border-transparent');
        });
        btn.classList.remove('border-transparent');
        btn.classList.add('border-cyan-400');

        // Save to room
        if (currentRoom) {
          currentRoom.background_theme = theme;
        }
      });
    });

    // Items
    document.querySelectorAll('.item-card').forEach(card => {
      card.addEventListener('click', () => {
        selectedItem = card.dataset.item;
        const buttonsContainer = document.getElementById('user-selector-buttons');
        buttonsContainer.innerHTML = '';

        currentRoom.participants.forEach((pid, idx) => {
          const btn = document.createElement('button');
          btn.className = `w-full px-4 py-3 rounded-xl glass hover:glass-bright transition-all text-white font-semibold flex items-center gap-3 ${idx === 0 ? 'border border-cyan-500/50' : ''}`;
          btn.innerHTML = `<span class="text-2xl">${['üë§', 'üë•', 'üë•', 'üë•'][idx]}</span><span>${names[idx]}</span>`;
          btn.addEventListener('click', (e) => {
            e.preventDefault();
            if (!userItems[pid].includes(selectedItem)) {
              userItems[pid].push(selectedItem);
              updateUserDisplay(idx, pid);
            }
            document.getElementById('user-selector').classList.add('hidden');
          });
          buttonsContainer.appendChild(btn);
        });

        document.getElementById('user-selector').classList.remove('hidden');
      });
    });

    function updateUserDisplay(idx, userId) {
      const container = document.getElementById(`items-${idx}`);
      container.innerHTML = '';
      userItems[userId].forEach(item => {
        const badge = document.createElement('span');
        badge.className = 'px-2 py-0.5 rounded-lg text-white text-xs bg-cyan-500/50 cursor-pointer hover:bg-red-500/70 transition-all';
        badge.textContent = item.charAt(0).toUpperCase() + item.slice(1);
        badge.addEventListener('click', () => {
          const idx = userItems[userId].indexOf(item);
          if (idx > -1) {
            userItems[userId].splice(idx, 1);
            updateUserDisplay(idx, userId);
          }
        });
        container.appendChild(badge);
      });
    }

    // Actions
    document.getElementById('photo-btn').addEventListener('click', () => {
      const toast = document.getElementById('photo-toast');
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 2000);
    });

    document.getElementById('video-btn').addEventListener('click', () => {
      isRecording = !isRecording;
      const indicator = document.getElementById('recording-indicator');
      if (isRecording) {
        indicator.classList.remove('hidden');
        recordingTime = 0;
        recordingInterval = setInterval(() => {
          recordingTime++;
          document.getElementById('record-time').textContent = String(Math.floor(recordingTime / 60)).padStart(2, '0') + ':' + String(recordingTime % 60).padStart(2, '0');
        }, 1000);
      } else {
        indicator.classList.add('hidden');
        clearInterval(recordingInterval);
        document.getElementById('share-modal').classList.remove('hidden');
      }
    });

    document.getElementById('share-btn').addEventListener('click', () => {
      document.getElementById('share-modal').classList.remove('hidden');
    });

    document.getElementById('close-share').addEventListener('click', () => {
      document.getElementById('share-modal').classList.add('hidden');
    });

    document.querySelectorAll('.share-platform').forEach(btn => {
      btn.addEventListener('click', () => {
        const platform = btn.dataset.platform;
        const msg = encodeURIComponent('Check my AR Fashion look! üëó‚ú®');
        const urls = {
          whatsapp: `https://wa.me/?text=${msg}`,
          instagram: 'https://instagram.com',
          facebook: `https://facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`
        };
        if (urls[platform]) window.open(urls[platform], '_blank', 'noopener,noreferrer');
        document.getElementById('share-modal').classList.add('hidden');
      });
    });

    document.getElementById('share-invite-btn').addEventListener('click', () => {
      document.getElementById('invite-modal').classList.remove('hidden');
    });

    document.getElementById('close-invite').addEventListener('click', () => {
      document.getElementById('invite-modal').classList.add('hidden');
    });

    document.getElementById('copy-code').addEventListener('click', () => {
      navigator.clipboard.writeText(document.getElementById('invite-code').textContent);
      const btn = document.getElementById('copy-code');
      btn.textContent = '‚úì Copied!';
      setTimeout(() => { btn.textContent = 'üìã Copy Code'; }, 2000);
    });

    document.getElementById('logout-btn').addEventListener('click', () => {
      if (currentRoom) sessionRooms.delete(currentRoom.room_id);
      currentUser = null;
      currentRoom = null;
      document.getElementById('studio-view').classList.add('hidden');
      document.getElementById('login-view').classList.remove('hidden');
      document.getElementById('username-input').value = '';
      document.getElementById('room-code-input').value = '';
    });

    document.getElementById('close-selector').addEventListener('click', () => {
      document.getElementById('user-selector').classList.add('hidden');
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c29bbfd0621396c',t:'MTc2OTE5NjkyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>